<!--
Credit to the following:

* jQuery for jQuery library
* Google for Google Maps API
* Kiro Risk for Fuse.js
-->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Do Durban - activity finder</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/style.css">
		<script src="js/lib/knockout-3.4.0.js"></script>
		<script src="js/lib/jquery-2.2.0.min.js"></script>
		<script src="js/lib/fuse.min.js"></script>
		<script async defer>
			var url = "https://maps.googleapis.com/maps/api/js?key=AIzaSyAT4hPk1A042B1lW5gjL78aY9zmTwLZNDM&callback=init";
			//defer attr ensures html parsing is not interuppted; js execution will occur after html parsing
			$.getScript(url)
				.done(function(){
					console.log('Google Maps load successful');
				}).fail(function(){
					console.log('Google Maps load faulty');
					$('#wait').text('ERROR LOADING GOOGLE MAP');
				});
		</script>
		<script defer src="js/app.js"></script>
	</head>
	<body>
		<div class='grid'> <!-- wrapper div -->
			<div class='col-2-12 window_size'>
				<!-- menu view -->
				<!-- menu sub view: search and nav functions -->
				<div id='nav'>
					<form data-bind='submit: searchButtonClick'>
						<label>Filter using name:</label><input id='search_bar' type='text' data-bind='value: currentSearchValue'/>
						<div>
							<button type='submit'>Submit</button>
						</div>
					</form>
					<form data-bind='submit: searchButtonClick2'>
						<div>
							<label>or category:</label>
							<select data-bind='options: searchCategories, value: currentDropSearchValue'>
							</select>
							<div>
								<button type='submit'>Submit</button>
							</div>
						</div>
					</form>
						<div>
							<form  data-bind='click: clearSearch'>
								<button type='submit'>Clear search</button>
							</form>
						</div>
				</div>
				<!-- menu sub view: list items -->
				<div id='list_items' data-bind='foreach: neighborhoodsData'>
					<div class='list_spot_item' data-bind='text: spotName, click: $parent.clickListItem, attr: {id: $index}, visible: visible'></div>
				</div>
			</div>
			<div class='col-10-12 window_size'>
				<!-- map view -->
				<div id='map'></div>
				<div id='wait' data-bind='visible: mapIsLoading, text: loadingMessage'></div>
			</div>
	</body>
</html>